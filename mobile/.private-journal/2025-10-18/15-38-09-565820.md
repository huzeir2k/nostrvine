---
title: "3:38:09 PM - October 18, 2025"
date: 2025-10-18T02:38:09.565Z
timestamp: 1760755089565
---

## Project Notes

## OpenVine Bug Report System Architecture Design

**Task**: Design comprehensive bug report system for non-crash issues using NIP-17 encrypted messages.

**Key Findings from Codebase Analysis**:
- UnifiedLogger already provides structured logging with categories (relay, video, ui, auth, storage, api, system)
- ErrorAnalyticsTracker tracks errors comprehensively to Firebase Analytics
- Firebase Crashlytics handles crashes automatically
- VideoSharingService demonstrates existing NIP-04 encrypted DM pattern (needs upgrading to NIP-17)
- NostrService interface exists but needs NIP-17 message support

**NIP-17 Technical Requirements**:
- Kind 14: Unsigned chat message with p-tags for recipients
- Kind 13: Sealed message (signed, encrypted with NIP-44)
- Kind 1059: Gift wrap (random keypair, randomized timestamp for anonymity)
- Separate encrypted event per recipient
- Uses NIP-44 encryption (not NIP-04)

**Architecture Components Needed**:
1. LogCaptureService - Circular buffer for recent logs
2. BugReportService - Diagnostic collection + NIP-17 sending
3. NIP17EncryptionService - Handle seal/gift wrap encryption
4. UI integration in Settings screen
5. In-app bug report dialog/widget

**Critical Design Decisions**:
- Buffer size for log capture (suggest 1000 entries, ~1MB max)
- Recipient pubkey for bug reports (likely OpenVine support account)
- What diagnostic data to include (device info, relay status, recent errors)
- Privacy considerations (sanitize sensitive data)

