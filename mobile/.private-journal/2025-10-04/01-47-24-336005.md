---
title: "1:47:24 AM - October 4, 2025"
date: 2025-10-03T12:47:24.336Z
timestamp: 1759495644336
---

## Project Notes

**Fixed Ghost Video Playback - Removed keepAlive from Feed Providers**

**Root Cause**: Feed providers (HomeFeed, ProfileVideosNotifier, SocialNotifier) had `keepAlive: true`, which kept their widgets mounted even when tabs weren't visible. This caused:
- Videos to auto-play in background tabs
- Unnecessary rebuilds when app backgrounded
- Log spam from invisible tabs building UI

**The Key Insight**: Video controllers and UI widgets are SEPARATE:
- VideoManager keeps controllers alive (correct - for instant playback)
- Feed widgets don't need to stay mounted - they can rebuild instantly from cached data
- Controller can exist without widget being mounted

**Changes Made**:
1. `HomeFeed`: `keepAlive: true` → `keepAlive: false` 
2. `ProfileVideosNotifier`: `keepAlive: true` → `keepAlive: false`
3. `SocialNotifier`: `keepAlive: true` → `keepAlive: false`

**Why This Works**:
- Widgets unmount when tab not visible
- Controllers stay warm in VideoManager
- When tab becomes visible again, widget remounts and grabs existing controller
- No video initialization on invisible tabs = no ghost playback

**Architecture Pattern**:
- **Services**: `keepAlive: true` (singletons like NostrService, AuthService)
- **Feed/UI Providers**: `keepAlive: false` (can dispose when not watched)
- **Controllers**: Managed by VideoManager with `ref.keepAlive()` + timers for smart disposal

Location: mobile/lib/providers/
