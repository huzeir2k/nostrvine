---
title: "8:35:28 AM - November 10, 2025"
date: 2025-11-10T07:35:28.883Z
timestamp: 1762760128883
---

## Project Notes

**OpenVine New Vines Tab Fix - COMPLETED**

Successfully fixed two bugs in ExploreScreen:

**1. New Vines Tab Missing Video Subscription**:
- **Problem**: Both "New Vines" and "Popular Vines" tabs used same `videoEventsProvider` which subscribes to `SubscriptionType.discovery` (trending sort)
- **Result**: New Vines tab only showed locally cached videos, not fetching from relay for other users
- **Root Cause**: No separate provider/subscription for `SubscriptionType.popularNow`
- **Solution**: 
  - Created `PopularNowFeed` provider using `VideoFeedBuilder` helper
  - Provider subscribes to `SubscriptionType.popularNow` which fetches all videos sorted by created_at
  - Updated `_buildNewVinesTab()` to use `popularNowFeedProvider` instead of `videoEventsProvider`
  - Updated refresh logic to invalidate correct provider per tab

**2. Tab Navigation Reset Bug**:
- **Problem**: Tapping "New Vines" when already on New Vines would reset to "Popular Vines" tab
- **Root Cause**: `onTap` handler always called `_resetToDefaultState()` which navigated to `/explore`, causing TabController to reset to initialIndex:1
- **Solution**: Only navigate if actually in feed/hashtag mode, otherwise do nothing
- **Code**: Check `pageContext.videoIndex` and `_hashtagMode` before calling `_resetToDefaultState()`

**Architecture Improvements**:
- Now using dedicated subscription types per tab:
  - New Vines: `SubscriptionType.popularNow` (all videos, sorted by created_at)
  - Popular Vines: `SubscriptionType.discovery` (all videos, sorted by loop_count client-side)
  - Editor's Pick: Curated content from `curationProvider`
- Each tab can now have different server-side filters and sorting
- VideoFeedBuilder helper makes it easy to create new feed types

Files modified:
- `lib/screens/explore_screen.dart`: Updated _buildNewVinesTab() and TabBar onTap logic
- Commit: 63ea9a3
